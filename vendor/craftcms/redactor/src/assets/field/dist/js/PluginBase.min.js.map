{"version":3,"sources":["PluginBase.js"],"names":["Craft","Redactor","PluginBase","app","title","apiTarget","icon","elementSiteId","init","this","start","lang","get","overrideButton","replaceButton","allButtons","toolbar","getButtonsKeys","indexOf","previousButton","getButtonByIndex","$icon","placeholderKey","placeholder","addButtonAfter","remove","buttonData","api","button","setIcon","addButton","buttonName","position","Math","min","length","$","setElementSiteId","siteId"],"mappings":"AAAAA,MAAMC,YAEND,MAAMC,SAASC,YACXC,IAAK,KACLC,MAAO,KACPC,UAAW,KACXC,KAAM,KACNC,cAAe,KAEfC,KAAM,SAASL,GACXM,KAAKN,IAAMA,GAGfO,MAAO,WACHD,KAAKL,MAAQK,KAAKN,IAAIQ,KAAKC,IAAIH,KAAKL,QAGxCS,eAAgB,SAAUC,GACtB,IAAIC,EAAaN,KAAKN,IAAIa,QAAQC,iBAGlC,IAA2B,IAFHF,EAAWG,QAAQJ,GAE3C,CAIA,IAAIK,EAAiBV,KAAKN,IAAIa,QAAQI,iBAAiBL,EAAWG,QAAQJ,IACtER,EAAOa,EAAeE,MAAMT,IAAI,GAEhCU,EAAiBR,EAAc,eAC/BS,EAAcd,KAAKN,IAAIa,QAAQQ,eAAeV,EAAeQ,GAAiBlB,MAAOK,KAAKL,QAC9Fe,EAAeM,SAEf,IAAIC,GACAtB,MAAOK,KAAKL,MACZuB,IAAKlB,KAAKJ,WAIVuB,EAASnB,KAAKN,IAAIa,QAAQQ,eAAeF,EAAgBR,EAAeY,GAC5EH,EAAYE,SAEZG,EAAOC,QAAQvB,KAGnBwB,UAAW,SAAUC,EAAYC,GAC7B,IAAIjB,EAAaN,KAAKN,IAAIa,QAAQC,iBAClCe,EAAWC,KAAKC,IAAInB,EAAWoB,OAAQH,GAEvC,IAAIN,GACAtB,MAAOK,KAAKL,MACZuB,IAAKlB,KAAKJ,WAGCI,KAAKN,IAAIa,QAAQI,iBAAiBY,EAAW,GAC/CvB,KAAKN,IAAIa,QAAQc,UAAUC,EAAYL,GAE7CG,QAAQO,EAAE,qBAAqBL,EAAW,UAAUnB,IAAI,KAGnEyB,iBAAkB,SAAUC,GACxB7B,KAAKF,cAAgB+B","file":"PluginBase.min.js","sourcesContent":["Craft.Redactor = {};\n\nCraft.Redactor.PluginBase = {\n    app: null,\n    title: null,\n    apiTarget: null,\n    icon: null,\n    elementSiteId: null,\n\n    init: function(app) {\n        this.app = app;\n    },\n\n    start: function() {\n        this.title = this.app.lang.get(this.title);\n    },\n\n    overrideButton: function (replaceButton) {\n        var allButtons = this.app.toolbar.getButtonsKeys();\n        var targetButtonIndex = allButtons.indexOf(replaceButton);\n\n        if (targetButtonIndex === -1) {\n            return;\n        }\n\n        var previousButton = this.app.toolbar.getButtonByIndex(allButtons.indexOf(replaceButton));\n        var icon = previousButton.$icon.get(0);\n\n        var placeholderKey = replaceButton+'_placeholder';\n        var placeholder = this.app.toolbar.addButtonAfter(replaceButton, placeholderKey, {title: this.title});\n        previousButton.remove();\n\n        var buttonData = {\n            title: this.title,\n            api: this.apiTarget\n        };\n\n        // Create the new button\n        var button = this.app.toolbar.addButtonAfter(placeholderKey, replaceButton, buttonData);\n        placeholder.remove();\n\n        button.setIcon(icon);\n    },\n\n    addButton: function (buttonName, position) {\n        var allButtons = this.app.toolbar.getButtonsKeys();\n        position = Math.min(allButtons.length, position);\n\n        var buttonData = {\n            title: this.title,\n            api: this.apiTarget\n        };\n\n        var previous = this.app.toolbar.getButtonByIndex(position - 1);\n        var button = this.app.toolbar.addButton(buttonName, buttonData);\n\n        button.setIcon($('<i class=\"re-icon-'+buttonName+'\"></i>').get(0));\n    },\n\n    setElementSiteId: function (siteId) {\n        this.elementSiteId = siteId;\n    }\n};\n"]}