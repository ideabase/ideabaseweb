{"version":3,"sources":["PluginBase.js"],"names":["Craft","Redactor","PluginBase","app","title","apiTarget","icon","elementSiteId","init","this","start","lang","get","overrideButton","replaceButton","allButtons","toolbar","getButtonsKeys","indexOf","previousButton","getButtonByIndex","$icon","placeholderKey","placeholder","addButtonAfter","remove","buttonData","api","button","setIcon","addButton","buttonName","position","Math","min","length","$","setElementSiteId","siteId"],"mappings":"AAAAA,MAAMC,SAAW,GAEjBD,MAAMC,SAASC,WAAa,CACxBC,IAAK,KACLC,MAAO,KACPC,UAAW,KACXC,KAAM,KACNC,cAAe,KAEfC,KAAM,SAASL,GACXM,KAAKN,IAAMA,GAGfO,MAAO,WACHD,KAAKL,MAAQK,KAAKN,IAAIQ,KAAKC,IAAIH,KAAKL,QAGxCS,eAAgB,SAAUC,GACtB,IAAIC,EAAaN,KAAKN,IAAIa,QAAQC,iBAGlC,IAA2B,IAFHF,EAAWG,QAAQJ,GAE3C,CAIA,IAAIK,EAAiBV,KAAKN,IAAIa,QAAQI,iBAAiBL,EAAWG,QAAQJ,IACtER,EAAOa,EAAeE,MAAMT,IAAI,GAEhCU,EAAiBR,EAAc,eAC/BS,EAAcd,KAAKN,IAAIa,QAAQQ,eAAeV,EAAeQ,EAAgB,CAAClB,MAAOK,KAAKL,QAC9Fe,EAAeM,SAEf,IAAIC,EAAa,CACbtB,MAAOK,KAAKL,MACZuB,IAAKlB,KAAKJ,WAIVuB,EAASnB,KAAKN,IAAIa,QAAQQ,eAAeF,EAAgBR,EAAeY,GAC5EH,EAAYE,SAEZG,EAAOC,QAAQvB,KAGnBwB,UAAW,SAAUC,EAAYC,GAC7B,IAAIjB,EAAaN,KAAKN,IAAIa,QAAQC,iBAClCe,EAAWC,KAAKC,IAAInB,EAAWoB,OAAQH,GAEvC,IAAIN,EAAa,CACbtB,MAAOK,KAAKL,MACZuB,IAAKlB,KAAKJ,WAGCI,KAAKN,IAAIa,QAAQI,iBAAiBY,EAAW,GAC/CvB,KAAKN,IAAIa,QAAQc,UAAUC,EAAYL,GAE7CG,QAAQO,EAAE,qBAAqBL,EAAW,UAAUnB,IAAI,KAGnEyB,iBAAkB,SAAUC,GACxB7B,KAAKF,cAAgB+B","file":"PluginBase.min.js","sourcesContent":["Craft.Redactor = {};\r\n\r\nCraft.Redactor.PluginBase = {\r\n    app: null,\r\n    title: null,\r\n    apiTarget: null,\r\n    icon: null,\r\n    elementSiteId: null,\r\n\r\n    init: function(app) {\r\n        this.app = app;\r\n    },\r\n\r\n    start: function() {\r\n        this.title = this.app.lang.get(this.title);\r\n    },\r\n\r\n    overrideButton: function (replaceButton) {\r\n        var allButtons = this.app.toolbar.getButtonsKeys();\r\n        var targetButtonIndex = allButtons.indexOf(replaceButton);\r\n\r\n        if (targetButtonIndex === -1) {\r\n            return;\r\n        }\r\n\r\n        var previousButton = this.app.toolbar.getButtonByIndex(allButtons.indexOf(replaceButton));\r\n        var icon = previousButton.$icon.get(0);\r\n\r\n        var placeholderKey = replaceButton+'_placeholder';\r\n        var placeholder = this.app.toolbar.addButtonAfter(replaceButton, placeholderKey, {title: this.title});\r\n        previousButton.remove();\r\n\r\n        var buttonData = {\r\n            title: this.title,\r\n            api: this.apiTarget\r\n        };\r\n\r\n        // Create the new button\r\n        var button = this.app.toolbar.addButtonAfter(placeholderKey, replaceButton, buttonData);\r\n        placeholder.remove();\r\n\r\n        button.setIcon(icon);\r\n    },\r\n\r\n    addButton: function (buttonName, position) {\r\n        var allButtons = this.app.toolbar.getButtonsKeys();\r\n        position = Math.min(allButtons.length, position);\r\n\r\n        var buttonData = {\r\n            title: this.title,\r\n            api: this.apiTarget\r\n        };\r\n\r\n        var previous = this.app.toolbar.getButtonByIndex(position - 1);\r\n        var button = this.app.toolbar.addButton(buttonName, buttonData);\r\n\r\n        button.setIcon($('<i class=\"re-icon-'+buttonName+'\"></i>').get(0));\r\n    },\r\n\r\n    setElementSiteId: function (siteId) {\r\n        this.elementSiteId = siteId;\r\n    }\r\n};\r\n"]}